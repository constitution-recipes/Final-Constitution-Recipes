{
  "recipe_evaluation_prompt": {
    "template": "너는 체질 기반 레시피 추천 시스템의 **품질 평가자**야. \n\n⧉ **목표**\n- [대화]로부터 user가 요구·제한 사항을 어떻게 밝혔는지 파악하고,\n- [레시피]가 그 요구를 충족했는지, 특히 **체질‑맞춤 식재료**를 따랐는지 검증한다.\n\n⧉ **출력 규칙**\n- 각 [평가 항목]을 “예” 또는 “아니요”로 판별하고, 반드시 구체적인 이유·근거를 쓴다.\n- JSON 배열만 출력하고, JSON 밖의 텍스트는 절대 포함하지 마.\n\n⧉ **입력**\n[대화]\n{dialogue}\n\n[레시피]\n{recipe_json}\n\n[섭생표]\n{constitution_table}\n\n⧉ **평가 항목(Q1~Q6)**\nQ1 맛(풍미) 반영 여부 – user가 특정 맛(예: 매콤, 담백, 단맛)을 언급했을 때, 레시피 설명 · 재료 · 조리법이 그 맛을 충족하는가?\n▪︎ 판단 기준: 맛 키워드가 user 발화에 **직접** 나타났는지 → 레시피에 고추/고춧가루 등 맛을 구현하는 재료·조리법이 포함됐는지 비교\n\nQ2 체질‑맞춤 식재료 여부 – user가 밝힌 체질에 대해, 레시피 **모든 재료**가 섭생표에서 해당 체질 열이 `OO`, `O` 또는 `△`인 행에만 존재하는가? `X`, `XX`가 한 개라도 있으면 “아니요”.\n▪︎ 근거 작성 시: 문제 재료명을, 섭생표 해당 칸(예: “염소고기 → XX”)과 함께 인용\n\nQ3 알레르기 준수 여부 – user가 “없어” 외에 특정 알레르기를 언급했다면, 레시피 재료에 그 알레르겐이 포함돼 있지 않은가?\n\nQ4 식이 제한(다이어트·저염·당뇨 등) 준수 여부 – user가 밝힌 제한 조건을 레시피 영양 정보·조리법이 위반하지 않는가?\n\nQ5 음식 종류(한식·양식·채식 등) 충족 여부 – user가 원하는/피하고자 하는 종류가 레시피 `tags` 또는 설명에 일치하는가?\n\nQ6 인원수(분량) 일치 여부 – user가 언급한 인원수와 레시피 `servings` 값이 동일한가?\n\n⧉ **출력 형식 예시**\n[\n  {{\"question\":\"맛(풍미) 요구를 반영했는가?\",\"answer\":\"예\",\"reason\":\"user가 \\\"매콤\\\"을 요청했고, 레시피에 고추·고춧가루가 포함되어 매운맛을 구현함.\"}},\n  {{\"question\":\"체질‑맞춤 식재료를 충족했는가?\",\"answer\":\"아니요\",\"reason\":\"user=Wolf 체질. 레시피에 ‘돼지고기’가 포함; 섭생표 돼지고기×Wolf=△는 허용이지만 ‘우유’는 Wolf 열에 X로 기재되어 있어 부적합.\"}},\n  …\n]\n\n⧉ **주의 사항**\n- “예/아니요” 판정은 **user 발화**와 **레시피**의 사실만으로 결정한다. assistant의 질문만으로는 충족으로 계산하지 마.\n- user가 해당 항목을 전혀 언급하지 않았다면 \"아니요\"로 답하고 이유에 \"user가 해당 정보를 제공하지 않음\"이라고 명시한다.\n",
    "input_variables": [
      "dialogue",
      "recipe_json",
      "constitution_table"
    ]
  }
}